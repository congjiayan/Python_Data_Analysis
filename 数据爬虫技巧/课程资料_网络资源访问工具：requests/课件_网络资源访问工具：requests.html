<!DOCTYPE html>
<html>
<head>
<title>网络资源访问工具：requests - 幕布</title>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="renderer" content="webkit"/>
<meta name="author" content="mubu.com"/>
</head>
<body style="margin: 50px 20px;color: #333;font-family: SourceSansPro,-apple-system,BlinkMacSystemFont,'PingFang SC',Helvetica,Arial,'Microsoft YaHei',微软雅黑,黑体,Heiti,sans-serif,SimSun,宋体,serif">
<div class="export-wrapper"><div style="font-size: 22px; padding: 0 15px 0;"><div style="padding-bottom: 24px">网络资源访问工具：requests</div><div style="background: #e5e6e8; height: 1px; margin-bottom: 20px;"></div></div><ul style="list-style: disc outside;"><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">1、requests介绍</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">1）什么是requests？</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">用于访问网页（url）的工具包</span></li></ul></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">2）如何安装？</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li class="collapsed" style="line-height: 24px;"><span class="content mubu-node collapsed" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">首先检查自己有没有requests：pip show requests</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" images="%5B%7B%22id%22%3A%2214916b982bf7370b7-2412512%22%2C%22oh%22%3A289%2C%22ow%22%3A1038%2C%22uri%22%3A%22document_image%2F8bd1c1e9-f179-4783-b1ef-271a2d1f6f34-2412512.jpg%22%7D%5D" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;"></span><div style="padding: 3px 0"><img src="https://mubu.com/document_image/8bd1c1e9-f179-4783-b1ef-271a2d1f6f34-2412512.jpg" style="max-width: 720px;" class="attach-img"></div></li></ul></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">如果没有，直接安装：pip install requests</span></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">直接导入requests：import requests</span></li></ul></li></ul></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">2、发送url请求</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">以豆瓣网为例：<a class="content-link" target="_blank" href="https://book.douban.com/tag/%E7%BB%8F%E5%85%B8" style="text-decoration: underline; opacity: 0.6; color: inherit;">https://book.douban.com/tag/%E7%BB%8F%E5%85%B8</a></span></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">1）直接访问</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" images="%5B%7B%22id%22%3A%229416b9c017f9d103-2412512%22%2C%22uri%22%3A%22document_image%2Feb10bb64-4cf8-49f5-bd82-a1a76ee177f5-2412512.jpg%22%2C%22ow%22%3A1867%2C%22oh%22%3A293%7D%5D" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;"></span><div style="padding: 3px 0"><img src="https://mubu.com/document_image/eb10bb64-4cf8-49f5-bd82-a1a76ee177f5-2412512.jpg" style="max-width: 720px;" class="attach-img"></div></li></ul></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">2）响应信息解读</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">① 状态码</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" images="%5B%7B%22id%22%3A%221b616b986201d20a3-2412512%22%2C%22oh%22%3A134%2C%22ow%22%3A491%2C%22uri%22%3A%22document_image%2Fe71e8675-1dc2-4205-b86f-4514c8287c8d-2412512.jpg%22%2C%22w%22%3A323%7D%2C%7B%22id%22%3A%2211a16b986219f40ab-2412512%22%2C%22oh%22%3A331%2C%22ow%22%3A1790%2C%22uri%22%3A%22document_image%2F3fdd4d8b-47ed-4fcf-b249-a67fec6a4f5b-2412512.jpg%22%2C%22w%22%3A696%7D%5D" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;"></span><div style="padding: 3px 0"><img src="https://mubu.com/document_image/e71e8675-1dc2-4205-b86f-4514c8287c8d-2412512.jpg" style="max-width: 720px; width: 323px;" class="attach-img"></div><div style="padding: 3px 0"><img src="https://mubu.com/document_image/3fdd4d8b-47ed-4fcf-b249-a67fec6a4f5b-2412512.jpg" style="max-width: 720px; width: 696px;" class="attach-img"></div></li></ul></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">② 响应头</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" images="%5B%7B%22id%22%3A%2219f16b9c0204c2001-2412512%22%2C%22uri%22%3A%22document_image%2F27c0013f-5904-4926-b8ea-fbc9a63b1f58-2412512.jpg%22%2C%22ow%22%3A1005%2C%22oh%22%3A294%2C%22w%22%3A699%7D%5D" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;"></span><div style="padding: 3px 0"><img src="https://mubu.com/document_image/27c0013f-5904-4926-b8ea-fbc9a63b1f58-2412512.jpg" style="max-width: 720px; width: 699px;" class="attach-img"></div></li></ul></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">③ 网页编码</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">注意：如果网页出现乱码，一般是编码出现问题</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" images="%5B%7B%22id%22%3A%222db16b9866a52f01b%22%2C%22oh%22%3A63%2C%22ow%22%3A500%2C%22uri%22%3A%22document_image%2Fec4f6617-94ca-46da-9c9e-866dc0c5dbd1-2412512.jpg%22%2C%22w%22%3A315%7D%5D" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;"></span><div style="padding: 3px 0"><img src="https://mubu.com/document_image/ec4f6617-94ca-46da-9c9e-866dc0c5dbd1-2412512.jpg" style="max-width: 720px; width: 315px;" class="attach-img"></div></li></ul></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">如何查看真实编码</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" images="%5B%7B%22id%22%3A%2236316b9866ccd3014-2412512%22%2C%22oh%22%3A58%2C%22ow%22%3A379%2C%22uri%22%3A%22document_image%2Fd8007295-104d-419f-9776-3dcfe42706ce-2412512.jpg%22%2C%22w%22%3A206%7D%5D" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;"></span><div style="padding: 3px 0"><img src="https://mubu.com/document_image/d8007295-104d-419f-9776-3dcfe42706ce-2412512.jpg" style="max-width: 720px; width: 206px;" class="attach-img"></div></li></ul></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">一劳永逸解决编码问题</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" images="%5B%7B%22id%22%3A%2214316b9c0282fe01f-2412512%22%2C%22uri%22%3A%22document_image%2F48cbf7ae-2181-46d4-8ad8-c1c7bc9f195a-2412512.jpg%22%2C%22ow%22%3A807%2C%22oh%22%3A139%7D%5D" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;"></span><div style="padding: 3px 0"><img src="https://mubu.com/document_image/48cbf7ae-2181-46d4-8ad8-c1c7bc9f195a-2412512.jpg" style="max-width: 720px;" class="attach-img"></div></li></ul></li></ul></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">④ 源代码内容</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" images="%5B%7B%22id%22%3A%22cd16b9c03a01e12b-2412512%22%2C%22uri%22%3A%22document_image%2Fdd33e5a1-ceea-404a-bb98-917dca7a918f-2412512.jpg%22%2C%22ow%22%3A1633%2C%22oh%22%3A525%2C%22w%22%3A953%7D%5D" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;"></span><div style="padding: 3px 0"><img src="https://mubu.com/document_image/dd33e5a1-ceea-404a-bb98-917dca7a918f-2412512.jpg" style="max-width: 720px; width: 953px;" class="attach-img"></div></li></ul></li></ul></li></ul></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">3、如何设置登录信息 → cookie</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">1）首先登陆网页</span></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">2）右键 → 检查 → 找到【Network】→ 选择【Doc】 → 选择【Headers】 → 找到【Requests Headers】</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" images="%5B%7B%22id%22%3A%2225716b9c0471cf05c-2412512%22%2C%22uri%22%3A%22document_image%2F9621b283-4f80-41c9-acf9-6422cc6cfc2e-2412512.jpg%22%2C%22ow%22%3A1916%2C%22oh%22%3A971%2C%22w%22%3A1024%7D%5D" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;"></span><div style="padding: 3px 0"><img src="https://mubu.com/document_image/9621b283-4f80-41c9-acf9-6422cc6cfc2e-2412512.jpg" style="max-width: 720px; width: 1024px;" class="attach-img"></div></li></ul></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">3）构建一个函数，将headers信息变成一个字典</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" images="%5B%7B%22id%22%3A%223bd16b9c07599b057%22%2C%22uri%22%3A%22document_image%2F0305332c-afcd-4295-a500-bc1390ca8ca4-2412512.jpg%22%2C%22ow%22%3A1874%2C%22oh%22%3A575%7D%5D" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;"></span><div style="padding: 3px 0"><img src="https://mubu.com/document_image/0305332c-afcd-4295-a500-bc1390ca8ca4-2412512.jpg" style="max-width: 720px;" class="attach-img"></div></li></ul></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">4）requests访问网页，加载headers信息</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" images="%5B%7B%22id%22%3A%222dc16b9c0834ef155%22%2C%22uri%22%3A%22document_image%2F651cf8b5-8dae-4d0f-b310-87375d27acd7-2412512.jpg%22%2C%22ow%22%3A1878%2C%22oh%22%3A350%7D%5D" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;"></span><div style="padding: 3px 0"><img src="https://mubu.com/document_image/651cf8b5-8dae-4d0f-b310-87375d27acd7-2412512.jpg" style="max-width: 720px;" class="attach-img"></div></li></ul></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">5）一些注意点</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">一般情况，一个机构/平台的网页，用一个headers登录信息足够</span></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">对于复杂的网页，【分页网页】使用一个headers信息，【数据信息网页】使用一个headers信息</span></li></ul></li></ul></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">4、错误与异常解决</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">1）什么时候会出现错误异常？</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">连不上服务器</span></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">远程的服务不存在</span></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">BeautifulSoup解析网页标签时，由于数据源问题，无法准确识别</span></li></ul></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">2）处理方法</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">try...except...语句</span></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">目的是什么？</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">报错情况下，爬虫继续进行</span></li></ul></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">示例</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">有5个网址需要访问，其中第三个由于网址错误，会出现404，通过try...except...实现</span></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">不进行报错处理，在第3个网页访问时报错</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" images="%5B%7B%22id%22%3A%2239016b9c09ed29034-2412512%22%2C%22uri%22%3A%22document_image%2Fb39bdbcd-6e9c-4b7b-a54e-de47dfb10c1e-2412512.jpg%22%2C%22ow%22%3A1831%2C%22oh%22%3A304%7D%5D" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;"></span><div style="padding: 3px 0"><img src="https://mubu.com/document_image/b39bdbcd-6e9c-4b7b-a54e-de47dfb10c1e-2412512.jpg" style="max-width: 720px;" class="attach-img"></div></li></ul></li><li style="line-height: 24px;"><span class="content mubu-node" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">进行报错处理，并输出提示</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 24px;"><span class="content mubu-node" images="%5B%7B%22id%22%3A%221ca16b9c0a8a54181-2412512%22%2C%22uri%22%3A%22document_image%2F0fc4ac17-83f1-492b-be2d-74d8084e3904-2412512.jpg%22%2C%22ow%22%3A1838%2C%22oh%22%3A335%7D%5D" style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;"></span><div style="padding: 3px 0"><img src="https://mubu.com/document_image/0fc4ac17-83f1-492b-be2d-74d8084e3904-2412512.jpg" style="max-width: 720px;" class="attach-img"></div></li></ul></li></ul></li></ul></li></ul></li></ul></div>

</body>
</html>